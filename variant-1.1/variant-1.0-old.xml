<?xml version='1.0'?>
<!DOCTYPE rfc SYSTEM "rfc2629.dtd" [
    <!ENTITY rfc2119 PUBLIC '' 
      'http://xml.resource.org/public/rfc/bibxml/reference.RFC.2119.xml'>
    <!ENTITY rfc2781 PUBLIC '' 
      'http://xml.resource.org/public/rfc/bibxml/reference.RFC.2781.xml'>
    <!ENTITY rfc3629 PUBLIC '' 
      'http://xml.resource.org/public/rfc/bibxml/reference.RFC.3629.xml'>
    <!ENTITY rfc5730 PUBLIC '' 
      'http://xml.resource.org/public/rfc/bibxml/reference.RFC.5730.xml'>
    <!ENTITY rfc5731 PUBLIC '' 
      'http://xml.resource.org/public/rfc/bibxml/reference.RFC.5731.xml'>
    <!ENTITY rfc5890 PUBLIC '' 
      'http://xml.resource.org/public/rfc/bibxml/reference.RFC.5890.xml'>
    <!ENTITY rfc5891 PUBLIC '' 
      'http://xml.resource.org/public/rfc/bibxml/reference.RFC.5891.xml'>
    <!ENTITY rfc5892 PUBLIC '' 
      'http://xml.resource.org/public/rfc/bibxml/reference.RFC.5892.xml'>
    <!ENTITY rfc5893 PUBLIC '' 
      'http://xml.resource.org/public/rfc/bibxml/reference.RFC.5893.xml'>
    <!ENTITY rfc5894 PUBLIC '' 
      'http://xml.resource.org/public/rfc/bibxml/reference.RFC.5894.xml'>
    <!ENTITY w3crec-xml-20040204 PUBLIC '' 
      'http://xml.resource.org/public/rfc/bibxml4/reference.W3C.REC-xml-20040204.xml'>
    <!ENTITY w3crec-xmlschema-1-20041028 PUBLIC '' 
      'http://xml.resource.org/public/rfc/bibxml4/reference.W3C.REC-xmlschema-1-20041028.xml'>
    <!ENTITY w3crec-xmlschema-2-20041028 PUBLIC '' 
      'http://xml.resource.org/public/rfc/bibxml4/reference.W3C.REC-xmlschema-2-20041028.xml'>
]>
<?xml-stylesheet type='text/xsl' href='rfc2629.xslt' ?>
<?rfc private='EPP Domain Name Variant Mapping'?>

<?rfc compact='yes'?>
<?rfc subcompact='no'?>

<?rfc docmapping='yes'?>
<?rfc editing='no'?>
<?rfc strict='yes'?>
<?rfc symrefs='yes'?>

<?rfc toc='yes'?>
<?rfc tocindent='yes'?>
<rfc>
	<front>
		<title abbrev="EPP IDN Variant Mapping">Domain Name Variant Extension Mapping for the
			Extensible Provisioning Protocol (EPP)
		</title>
		<author initials='J.' surname='Mitchell' fullname='James Mitchell'>
			<organization>AusRegistry Pty Ltd</organization>
			<address>
				<email>support@ausregistry.com.au</email>
			</address>
		</author>
		<date month='September' year='2010' />
		<abstract>
			<t>This document describes an Extensible Provisioning Protocol (EPP)
				extension mapping for the provisioning and management of domain name
				variants stored in a shared central repository. Specified in XML,
				this mapping extends the EPP domain name mapping to provide
				additional features required for the provisioning of domain name
				variants adhering to the Internationalized Domain Names in
				Applications (IDNA) standards</t>
		</abstract>
		<note title="Status of This Document">
			<t>This document specifies an extension to the EPP protocol first
				implemented in AusRegistry's Domain Name Registry EPP service.
				Please refer to AusRegistry for more information on the status of
				this document. Distribution of this document and use of the protocol
				extensions defined within is unrestricted and unlimited.
			</t>
		</note>
		<note title="Copyright Notice">
			<t>Copyright (C) AusRegistry International Pty Ltd (2010) </t>
		</note>
	</front>
	<middle>
		<section title='Introduction' toc="default">
			<t>
				Internationalized Domain Names have introduced the ability to
				specify domain names in scripts beyond basic latin, allowing many
				languages and scripts to be coded as domain names. This however has
				led to forms of abuse, where malicious users exploit imperfections
				in the coding of languages in computers to register domain names
				with the intention of deceiving legitimate users.
			</t>
			<t>
				Registries, language experts and linguists have collaborated to
				define variant domain names as names that should be blocked from
				registration independent of the original name. However, due to
				technological and contextual issues, some blocked variants should be
				activated and published in the DNS to provide satisfactory end user
				experience. This document considers only activated variants; the
				listing of possible variants and blocked variants of a domain name
				is out of scope of this extension mapping.
			</t>
			<t>
				This document describes an extension mapping for version 1.0 of the
				Extensible Provisioning Protocol (EPP) described in RFC 5730
				<xref target="RFC5730" /><![CDATA[.]]>
				This mapping, an extension of the domain name mapping described in
				RFC 5731
				<xref target="RFC5731" /><![CDATA[,]]>
				is specified using the Extensible Markup Language (XML) 1.0
				<xref target="W3C.REC-xml-20040204" />
				and XML Schema notation
				<![CDATA[(]]><xref
				target="W3C.REC-xmlschema-1-20041028" />
				<xref target="W3C.REC-xmlschema-2-20041028" /><![CDATA[)]]>.
			</t>
			<t>
				The EPP core protocol specification
				<xref target="RFC5730" />
				provides a complete description of EPP command and response
				structures. A thorough understanding of the base protocol
				specification is necessary to understand the mapping described in
				this document. Familiarity with the IDNA protocol described in
				<xref target="RFC5890" /><![CDATA[,]]>
				<xref target="RFC5891" /><![CDATA[,]]>
				<xref target="RFC5892" /><![CDATA[,]]>
				<xref target="RFC5893" /><![CDATA[,]]>
				and
				<xref target="RFC5894" />
				is required to understand the concepts described in this document.
			</t>
			<section title="Conventions Used In This Document">
				<t>
					The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
					"SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in
					this document are to be interpreted as described in
					<xref target="RFC2119" /><![CDATA[.]]>
				</t>
				<t>
					In examples, "C:" represents lines sent by a protocol client and
					"S:" represents lines returned by a protocol server. Indentation
					and white space in examples are provided only to illustrate element
					relationships and are not a mandatory feature of this protocol.
				</t>
			</section>
		</section>
		<section title="Object Attributes" toc="default">
			<t>
				This extension adds additional elements to the EPP domain name
				mapping
				<xref target="RFC5731" /><![CDATA[.]]>
				Only those new elements are described here.
			</t>
			<section title="Variant Domain Name" toc="default">
				<t>
					Internationalized Domain Names in Applications introduces a
					mechanism to convert a domain name expressed in Unicode to an
					ASCII-compatible encoding (ACE) form that is a valid DNS label
					compatible with existing applications and infrastructure. This
					mechanism gives rise to two representations of the domain name
					containing:
					<list style="symbols">
						<t>one or more A-labels with zero or more non-internationalized labels</t>
						<t>one or more U-labels with zero or more non-internationalized labels</t>
					</list>
					This mapping requires the client supply both the A-label and
					U-label representations of the variant domain name to remove any
					ambiguity between server and client as to the name being activated.
				</t>
				<t>
					The &lt;variant&gt; element in this document maps to the A-label
					representation of the domain name and MUST NOT contain any
					U-labels. The associated "userForm" attribute maps to the U-label
					representation of the domain name and MUST NOT contain any
					A-labels.
				</t>
			</section>
		</section>
		<section title="EPP Command Mapping" toc="default">
			<t>
				A detailed description of the EPP syntax and semantics can be found
				in the EPP core protocol specification
				<xref target="RFC5730" /><![CDATA[.]]>
				The command mappings described here are specifically for use in
				implementing IDNA domain provisioning processes via EPP.
			</t>
			<section title="EPP Query Commands" toc="default">
				<t>
					EPP provides three commands to retrieve object information:
					&lt;check&gt; to determine if an object is known to the server,
					&lt;info&gt; to retrieve detailed information associated with an
					object, and &lt;transfer&gt; to retrieve object transfer status
					information.
				</t>
				<section title="EPP &lt;check&gt; Command" toc="default">
					<t>
						This
						extension does not add any elements to the EPP &lt;check&gt;
						command or &lt;check&gt; response described in the EPP domain
						mapping
						<xref target="RFC5731" /><![CDATA[.]]>
					</t>
				</section>
				<section title="EPP &lt;info&gt; Command" toc="default">
					<t> This extension adds elements to the EPP &lt;info&gt; command as
						well as the EPP &lt;info&gt; response, both described in the EPP
						domain mapping [1]. The response to this command MAY vary
						depending on the identity of the querying client, use of
						authorisation information, and server policy towards unauthorised
						clients.</t>
					<t>In
						addition to the EPP command elements described in the EPP domain
						mapping [1], the &lt;info&gt; command MUST contain an EPP
						&lt;extension&gt; element, which MUST contain an &lt;info&gt;
						element that identifies the variant namespace. The &lt;info&gt;
						element contains the following:
						<list style="symbols">
							<t>An optional "variants" attribute that indicates whether the
								response to the info command should list all variants of the
								domain. Allowable values for this attribute are "all", or
								"none", with the default value being "all". If "none" is
								specified, then no variants are listed in the response. If "all"
								is specified, or the attribute is not present, then all variants
								are listed in the response.</t>
						</list>
					</t>
					<figure>
						<preamble>Example &lt;info&gt; command:</preamble>
						<artwork>
<![CDATA[
C:<?xml version="1.0" encoding="UTF-8"?>
C:<epp xmlns="urn:ietf:params:xml:ns:epp-1.0">
C:  <command>
C:    <info>
C:      <info xmlns="urn:ietf:params:xml:ns:domain-1.0">
C:        <name>xn--3xan.example</name>
C:      </info>
C:    </info>
C:    <extension>
C:      <info xmlns="urn:X-ar:params:xml:ns:variant-1.0"
C:        variants="all"/>
C:    </extension>
C:    <clTRID>ABC-12345</clTRID>
C:  </command>
C: </epp>
]]></artwork>
					</figure>
					<t>
						When an &lt;info&gt; command has been successfully processed, the
						EPP &lt;resData&gt; element in the &lt;info&gt; response MUST
						contain child elements as described in the EPP domain mapping
						<xref target="RFC5731" /><![CDATA[.]]>
						In addition, the &lt;info&gt; response MUST contain an EPP
						&lt;extension&gt; element, which MUST contain an &lt;infData&gt;
						element that identifies the variant namespace. The &lt;infData&gt;
						element contains the following child elements:
						<list style="symbols">
							<t>
								One or more &lt;variant&gt; elements containing the fully
								qualified name of any variants of a domain name, in DNS form.
								Each &lt;variant&gt; element MUST have a "userForm" attribute
								indicating the native presentation form of the variant name.</t>
						</list>
					</t>
					<figure>
						<preamble>Example &lt;info&gt; response:</preamble>
						<artwork><![CDATA[
S:<epp xmlns="urn:ietf:params:xml:ns:epp-1.0">
S:  <response>
S:    <result code="1000">
S:      <msg lang="en">Command completed successfully</msg>
S:    </result>
S:    <resData>
S:      <infData xmlns="urn:ietf:params:xml:ns:domain-1.0">
S:        <name>xn--3xan.example</name>
S:        <roid>EXAMPLE1-REP</roid>
S:        <status s="ok" />
S:        <registrant>jd1234</registrant>
S:        <contact type="admin">sh8013</contact>
S:        <contact type="tech">sh8013</contact>
S:        <ns>
S:          <hostObj>ns1.example.com</hostObj>
S:          <hostObj>ns1.example.net</hostObj>
S:        </ns>
S:        <clID>ClientX</clID>
S:        <crID>ClientY</crID>
S:        <crDate>1999-04-03T22:00:00.0Z</crDate>
S:        <upID>ClientX</domain:upID>
S:        <upDate>1999-12-03T09:00:00.0Z</upDate>
S:        <exDate>2005-04-03T22:00:00.0Z</exDate>
S:        <trDate>2000-04-08T09:00:00.0Z</trDate>
S:        <authInfo>
S:          <pw>2fooBAR</pw>
S:        </authInfo>
S:      </infData>
S:    </resData>
S:    <extension> 
S:      <infData xmlns="urn:X-ar:params:xml:ns:variant-1.0">
S:        <variant userForm="&#969;&#963;.example">
S:          xn--4xal.example
S:        </variant>
S:      </infData>
S:    </extension>
S:    <trID>
S:      <clTRID>ABC-12345</clTRID>
S:      <svTRID>54321-XYZ</svTRID>
S:    </trID>
S:  </response>
S:</epp>
              ]]></artwork>
					</figure>
				</section>
				<section title="EPP &lt;transfer&gt; Command" toc="default">
					<t>This
						extension does not add any elements to the EPP &lt;transfer&gt;
						command or &lt;transfer&gt; response described in the EPP domain
						mapping
						<xref target="RFC5731" /><![CDATA[.]]>
					</t>
				</section>
			</section>
			<section title="EPP Transform Commands" toc="default">
				<t>EPP provides five commands to transform objects: &lt;create&gt;
					to create an instance of an object, &lt;delete&gt; to delete an
					instance of an object, &lt;renew&gt; to extend the validity period
					of an object, &lt;transfer&gt; to manage object sponsorship
					changes, and &lt;update&gt; to change information associated with
					an object.
				</t>
				<section title="EPP &lt;create&gt; Command" toc="default">
					<t>
						This extension does not add any elements to the EPP &lt;create&gt;
						command, however it does add extensions to the EPP &lt;create&gt;
						response. Both are described in the EPP domain mapping
						<xref target="RFC5731" /><![CDATA[.]]>
					</t>
					<t>
						When a &lt;create&gt; command has been successfully processed, the
						EPP &lt;resData&gt; element in the &lt;create&gt; response MUST
						contain child elements as described in the EPP domain mapping
						<xref target="RFC5731" /><![CDATA[.]]>
						In addition, the &lt;create&gt; response MUST contain an EPP
						&lt;extension&gt; element, which MUST contain an &lt;creData&gt;
						element identifying the variant namespace. The &lt;creData&gt;
						contains the following child elements:
						<list style="symbols">
							<t> One or more &lt;variant&gt; elements containing the fully
								qualified name of any variants of a domain name, in DNS form.
								Each &lt;variant&gt; element MUST have a userForm attribute
								indicating the native presentation form of the variant name.</t>
						</list>
					</t>
					<figure>
						<preamble>Example &lt;create&gt; response:</preamble>
						<artwork><![CDATA[
S:<?xml version="1.0" encoding="UTF-8"?>
S:<epp xmlns="urn:ietf:params:xml:ns:epp-1.0">
S:  <response>
S:    <result code="1000">
S:      <msg lang="en">Command completed successfully</msg>
S:    </result>
S:    <resData>
S:      <creData xmlns="urn:ietf:params:xml:ns:domain-1.0">
S:        <name>xn--3xan.example</name>
S:        <crDate>1999-04-03T22:00:00.0Z</crDate>
S:        <exDate>2001-04-03T22:00:00.0Z</exDate>
S:      </creData>
S:    </resData>
S:    <extension>
S:      <creData xmlns="urn:X-ar:params:xml:ns:variant-1.0">
S:        <variant userForm="&#969;&#963;.example">
S:          xn--4xal.example
S:        </variant>
S:      </creData>
S:    </extension>
S:    <trID>
S:      <clTRID>ABC-12345</clTRID>
S:      <svTRID>54321-XYZ</svTRID>
S:    </trID>
S:  </response>
S:</epp>
              ]]></artwork>
					</figure>
				</section>
				<section title="EPP &lt;delete&gt; Command" toc="default">
					<t>This
						extension does not add any elements to the EPP &lt;delete&gt;
						command or &lt;delete&gt; response described in the EPP domain
						mapping
						<xref target="RFC5731" /><![CDATA[.]]>
					</t>
				</section>
				<section title="EPP &lt;renew&gt; Command" toc="default">
					<t>This
						extension does not add any elements to the EPP &lt;renew&gt;
						command or &lt;renew&gt; response described in the EPP domain
						mapping
						<xref target="RFC5731" /><![CDATA[.]]>
					</t>
				</section>
				<section title="EPP &lt;transfer&gt; Command" toc="default">
					<t>This
						extension does not add any elements to the EPP &lt;transfer&gt;
						command or &lt;transfer&gt; response described in the EPP domain
						mapping
						<xref target="RFC5731" /><![CDATA[.]]>
					</t>
				</section>
				<section title="EPP <update> Command" toc="default">
					<t>
						This extension adds elements to the EPP &lt;update&gt; command
						described in the EPP domain mapping
						<xref target="RFC5731" /><![CDATA[.]]>
						In addition to the command elements in the domain mapping, the
						&lt;update&gt; command MUST contain an EPP &lt;extension&gt;
						element, which MUST contain an &lt;update&gt; element that
						identifies the variant namespace. The &lt;update&gt; element
						contains the following elements:
						<list style="symbols">
							<t>An OPTIONAL &lt;add&gt; element that contains the domain
								variants to be activated</t>
							<t>An OPTIONAL &lt;rem&gt; element that contains the domain
								variants to be deactivated.</t>
						</list>
					</t>
					<t>At
						least one &lt;add&gt; and &lt;rem&gt; element MUST be provided.
						The &lt;add&gt; and &lt;rem&gt; elements MUST contain the
						following elements
						<list style="symbols">
							<t>One or more &lt;variant&gt; elements, each containing the
								fully qualified name of a domain variant, in DNS form. Each
								&lt;variant&gt; element MUST have a "userForm" attribute
								indicating the native presentation form of the variant name</t>
						</list>
					</t>
					<figure>
						<preamble>Example &lt;update&gt; Command, Activate a Variant:</preamble>
						<artwork><![CDATA[
C:<?xml version="1.0" encoding="UTF-8"?>
C:<epp xmlns="urn:ietf:params:xml:ns:epp-1.0">
C:  <command>
C:    <update>
C:      <update xmlns="urn:ietf:params:xml:ns:domain-1.0">
C:        <name>xn--3xan.example</name>
C:      </update>
C:    </update>
C:    <extension>
C:      <update xmlns="urn:X-ar:params:xml:ns:variant-1.0">
C:        <add>
C:          <variant userForm="&#969;&#963;.example">
C:            xn--4xal.example
C:          </variant>
C:        </add>
C:      </update>
C:    </extension>
C:    <clTRID>ABC-12345</clTRID>
C:  </command>
C:</epp>
]]></artwork>
					</figure>
					<figure>
						<preamble>Example &lt;update&gt; Command, Remove a Variant:</preamble>
						<artwork><![CDATA[
C:<?xml version="1.0" encoding="UTF-8"?>
C:<epp xmlns="urn:ietf:params:xml:ns:epp-1.0">
C:  <command>
C:    <update>
C:      <update xmlns="urn:ietf:params:xml:ns:domain-1.0">
C:        <name>xn--3xan.example</name>
C:      </update>
C:    </update>
C:    <extension>
C:      <update xmlns="urn:X-ar:params:xml:ns:variant-1.0">
C:        <rem>
C:          <variant userForm="&#969;&#963;.example">
C:            xn--4xal.example
C:          </variant>
C:        </rem>
C:      </update>
C:    </extension>
C:    <clTRID>ABC-12345</clTRID>
C:  </command>
C:</epp>
]]></artwork>
					</figure>
				</section>
			</section>
		</section>
		<section title="Formal Syntax" toc="default">
			<t>An EPP object mapping is specified in XML Schema notation. The
				formal syntax presented here is a complete schema representation of
				the object mapping suitable for automated validation of EPP XML
				instances. The BEGIN and END tags are not part of the schema; they
				are used to note the beginning and ending of the schema for URI
				registration purposes.</t>
			<figure>
				<artwork>
<![CDATA[
BEGIN
<?xml version="1.0" encoding="UTF-8"?>
<schema targetNamespace="urn:X-ar:params:xml:ns:variant-1.1"
  xmlns:variant="urn:X-ar:params:xml:ns:variant-1.1"
  xmlns:epp="urn:ietf:params:xml:ns:epp-1.0"
  xmlns:eppcom="urn:ietf:params:xml:ns:eppcom-1.0"
  xmlns="http://www.w3.org/2001/XMLSchema"
  elementFormDefault="qualified">

  <!--
    Import common EPP element types.
  -->
  <import namespace="urn:ietf:params:xml:ns:epp-1.0"
    schemaLocation="epp-1.0.xsd" />
  <import namespace="urn:ietf:params:xml:ns:eppcom-1.0"
    schemaLocation="eppcom-1.0.xsd" />


  <annotation>
    <documentation>
      Internationalised Domain Name Extensions to the Extensible
      Provisioning Protocol v1.0 schema.
    </documentation>
  </annotation>

  <!--
    Custom command extensions
  -->
  <element name="info" type="variant:infoType" />
  <element name="update" type="variant:updateType" />

  <!--
    Child elements of the <info> command extension.
  -->
  <complexType name="infoType">
    <attribute name="variants" type="variant:infoAttrType"
      default="all" />
  </complexType>

  <simpleType name="infoAttrType">
    <restriction base="token">
      <enumeration value="all" />
      <enumeration value="none" />
    </restriction>
  </simpleType>

  <!--
    Child elements of the <update> command extension.
  -->
  <complexType name="updateType">
    <sequence>
      <element name="add" type="variant:addRemType" minOccurs="0" />
      <element name="rem" type="variant:addRemType" minOccurs="0" />
    </sequence>
  </complexType>

  <complexType name="addRemType">
    <sequence>
      <element name="variant" type="variant:variantType"
        maxOccurs="unbounded" />
    </sequence>
  </complexType>
  
  <complexType name="variantType">
    <simpleContent>
      <extension base="eppcom:labelType">
        <attribute name="userForm" type="eppcom:labelType"
          use="required" />
      </extension>
    </simpleContent>
  </complexType>
  
  <!--
    Response extension elements.
  -->
  <element name="infData" type="variant:resDataType" />
  <element name="creData" type="variant:resDataType" />

  <complexType name="resDataType">
    <sequence>
      <element name="variant" type="variant:variantType"
        maxOccurs="unbounded" />
    </sequence>
  </complexType>

  <!-- End of schema. -->
</schema>
END
]]></artwork>
			</figure>
		</section>
		<section title="Internationalization Considerations" toc="default">
			<t>
				EPP is represented in XML, which provides native support for
				encoding information using the Unicode character set and its more
				compact representations including UTF-8
				<xref target="RFC3629" /><![CDATA[.]]>
				Conformant XML processors recognize both UTF-8 and UTF-16
				<xref target="RFC2781" /><![CDATA[.]]>
				Though XML includes provisions to identify and use other character
				encodings through use of an "encoding" attribute in an &lt;?xml?&gt;
				declaration, use of UTF-8 is RECOMMENDED in environments where
				parser encoding support incompatibility exists.
			</t>
			<t>
				As an extension of the EPP domain mapping
				<xref target="RFC5731" /><![CDATA[,]]>
				the internationalization requirements in the EPP domain mapping
				<xref target="RFC5731" />
				are followed by this extension. This extension does not override any
				of the EPP domain mapping
				<xref target="RFC5731" />
				internationalization features.
			</t>
		</section>
		<section title="Security Considerations" toc="default">
			<t>
				The mapping extensions described in this document do not provide any
				security services beyond those described by EPP
				<xref target="RFC5730" /><![CDATA[,]]>
				the EPP domain name mapping
				<xref target="RFC5731" /><![CDATA[,]]>
				and protocol layers used by EPP. The security considerations
				described in these other specifications apply to this specification
				as well.
			</t>
			<t>
				As with other domain object transforms, the EPP transform operations
				described in this document MUST be restricted to the sponsoring
				client as authenticated using the mechanisms described in Sections
				2.9.1.1 and 7 of
				<xref target="RFC5730" /><![CDATA[.]]>
				Any attempt to perform a transform operation on a domain object by
				any client other than the sponsoring client MUST be rejected with an
				appropriate EPP authorization error.
			</t>
		</section>
	</middle>
	<back>
		<references title='Normative References'>
    &rfc2119;
    &rfc5730;
    &rfc5731;
    &rfc5890;
    &rfc5891;
    &rfc5892;
    &rfc5893;
    &rfc5894;
    &w3crec-xml-20040204;
    &w3crec-xmlschema-1-20041028;
    &w3crec-xmlschema-2-20041028;
		</references>
		<references title='Informative References'>
    &rfc2781;
    &rfc3629;
		</references>
	</back>
</rfc>